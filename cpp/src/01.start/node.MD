# 编译器和链接

## 编译器

cpp从代码生成可执行文件时

1. 预处理：将文件变成翻译单元，翻译单元生成`obj`文件(包含机器码的文件, 以及定义好的常数数据)
2. 链接：将分散在各个翻译单元中的函数、变量等链接起来（定位）
3. 生成可执行文件（机器码）

### 阶段一： 预处理

常见的预处理语句:

1. `#incloud <xxx>`: 将xxx文件内容copy至当前位置，即使是一个`}`
2. `#define A B`: 别名，将代码中所有`B` 替换为`A`
3. if ifdef
4. pragma

### 阶段二： 链接

常见的异常

多个文件incloud同一个文件时，相当于在多个文件中都实现了一次被引用的函数，造成链接时引用异常

解决方法

同时定义同名的.h头文件和.cpp文件，头文件只包含类型声明，函数实现在.cpp中，避免多次实现

## 如何区分两个阶段

通过异常码

1. C开头：发生在编辑阶段
2. LINK开头，发生在链接阶段

## static 关键字

告诉编译器仅在当前文件中使用


